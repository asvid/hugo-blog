<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.91ae35f985ba4ae6473b8defee39551f3ce6ed2769fdfa9b3df93f2eac0da4bc.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/assets/favicon.ico>

    
    





  





  
  
  


<!-- Open Graph image and Twitter Card metadata -->

<title itemprop="name">Adam Świderski - Kotlin Static Factory Methods</title>
<meta property="og:title" content=Adam&#32;Świderski&#32;-&#32;Kotlin&#32;Static&#32;Factory&#32;Methods />
<meta name="twitter:title" content=Adam&#32;Świderski&#32;-&#32;Kotlin&#32;Static&#32;Factory&#32;Methods />
<meta itemprop="name" content=Adam&#32;Świderski&#32;-&#32;Kotlin&#32;Static&#32;Factory&#32;Methods />
<meta name="application-name" content=Adam&#32;Świderski&#32;-&#32;Kotlin&#32;Static&#32;Factory&#32;Methods />
<meta property="og:site_name" content="Adam Coding Corner" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="//localhost:1313/kotlin-static-factory-methods/" />
<link rel="canonical" href="//localhost:1313/kotlin-static-factory-methods/" itemprop="url" />
<meta name="url" content="//localhost:1313/kotlin-static-factory-methods/" />
<meta name="twitter:url" content="//localhost:1313/kotlin-static-factory-methods/" />
<meta property="og:url" content="//localhost:1313/kotlin-static-factory-methods/" />


<meta property="og:updated_time" content=14002-14-12T20:00:21Z />


<link rel="sitemap" type="application/xml" title="Sitemap" href='//localhost:1313/sitemap.xml' />

<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Adam Coding Corner" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />





<meta property="og:type" content="article" />
<meta property="article:publisher" content="" />
<meta property="og:article:published_time" content=14002-14-12T20:00:21Z />
<meta property="article:published_time" content=14002-14-12T20:00:21Z />








<meta name="generator" content="Hugo 0.123.7">


    
    

<link type="text/css" rel="stylesheet" href="/css/bundle.min.684be08038c8e02f27eed57328c70b4a2b8156ece14b38d3a7c0d860ea16edb9.css">


    
    <style>
    body {
        --sidebar-bg-color: #202020;
        --sidebar-img-border-color: #515151;
        --sidebar-p-color: #909090;
        --sidebar-h1-color: #FFF;
        --sidebar-a-color: #FFF;
        --sidebar-socials-color: #FFF;
        --text-color: #222;
        --bkg-color: #FAF9F6;
        --post-title-color: #303030;
        --list-color: #5A5A5A;
        --link-color: #268BD2;
        --date-color: #515151;
        --table-border-color: #E5E5E5;
        --table-stripe-color: #F9F9F9;
        --code-color: #000;
        --code-background-color: #E5E5E5;
        --code-block-color: #FFF;
        --code-block-background-color: #272822;
        --moon-sun-color: #FFF;
        --moon-sun-background-color: #515151;
    }
    body.dark-theme {
        --text-color: #EEE;
        --bkg-color: #121212;
        --post-title-color: #DBE2E9;
        --list-color: #bebebe;
        --link-color: #268BD2;
        --date-color: #9A9A9A;
        --table-border-color: #515151;
        --table-stripe-color: #202020;
        --code-color: #FFF;
        --code-background-color: #515151;
        --code-block-color: #FFF;
        --code-block-background-color: #272822;
    }
    body {
        background-color: var(--bkg-color);
    }
</style>

</head>

    <body class="dark-theme">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
            <a href="//localhost:1313/">
                <img src="/assets/profile_picture.png" alt="brand image">
            </a>
        
        
            <a href="//localhost:1313/">
                <h1>Adam Świderski</h1>
            </a>
        
    </h1>
    <p class="lead">
    software engineer
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">
        
        
        
        
            

            
                
                
                    <li class="heading">
                        <a href="/about/">About</a>
                    </li>
                    
                
            
                
                
            
                
                
            
            
                
                
                        
                
                        
                
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
        
        
            

            
                
                
            
                
                
                    <li class="heading">
                        <a href="/posts/">Posts</a>
                    </li>
                    
                        <li class="sub-heading">
                            Recent
                        </li>
                        
                            <li class="bullet">
                                <a href="//localhost:1313/2024-02-24-MVI/">Android Presentation Patterns: MVI</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="//localhost:1313/2024-02-09-MVVM/">Android Presentation Patterns: MVVM</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="//localhost:1313/2024-01-29-MVP/">Android Presentation Patterns: MVP</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="//localhost:1313/2024-01-27-MVC/">Android Presentation Patterns: MVC</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="//localhost:1313/2023-06-16-ci-is-your-friend/">Continuous Integration and Deployment: A Developer&#39;s Best Friends</a>
                            </li>
                        
                    
                
            
                
                
            
            
                
                
                        
                
                        
                
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
        

    </ul>
</nav>

        
    <a target="_blank" class="social" title="GitHub" href="https://github.com">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="-2 -2 24 24">
            <path fill="currentColor" d="M18.88 1.099C18.147.366 17.265 0 16.233 0H3.746C2.714 0 1.832.366 1.099 1.099C.366 1.832 0 2.714 0 3.746v12.487c0 1.032.366 1.914 1.099 2.647c.733.733 1.615 1.099 2.647 1.099H6.66c.19 0 .333-.007.429-.02a.504.504 0 0 0 .286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555 0 0 1-.904-.091a2.026 2.026 0 0 1-.872-.39a1.651 1.651 0 0 1-.572-.8l-.13-.3a3.25 3.25 0 0 0-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956 0 0 1-.17-.156a.723.723 0 0 1-.117-.182c-.026-.061-.004-.111.065-.15c.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1 0 0 1 .631.677c.2.355.44.626.722.813c.282.186.566.28.852.28c.286 0 .533-.022.742-.065a2.59 2.59 0 0 0 .585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907 0 0 1-1.333-.234a5.314 5.314 0 0 1-1.223-.507a3.5 3.5 0 0 1-1.047-.872c-.277-.347-.505-.802-.683-1.365c-.177-.564-.266-1.215-.266-1.952c0-1.049.342-1.942 1.027-2.68c-.32-.788-.29-1.673.091-2.652c.252-.079.625-.02 1.119.175c.494.195.856.362 1.086.5c.23.14.414.257.553.352a9.233 9.233 0 0 1 2.497-.338c.859 0 1.691.113 2.498.338l.494-.312a6.997 6.997 0 0 1 1.197-.572c.46-.174.81-.221 1.054-.143c.39.98.424 1.864.103 2.653c.685.737 1.028 1.63 1.028 2.68c0 .737-.089 1.39-.267 1.957c-.177.568-.407 1.023-.689 1.366a3.65 3.65 0 0 1-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9 0 0 1-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36 0 0 0 .208.189c.096.034.18.056.254.064c.074.01.18.013.318.013h2.914c1.032 0 1.914-.366 2.647-1.099c.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/>
        </svg>
    </a>



    <a target="_blank" class="social" title="LinkedIn" href="https://linkedin.com">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 448 512">
            <path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5c0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7c-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5c67.2 0 79.7 44.3 79.7 101.9V416z"/>
        </svg>
    </a>






    <a target="_blank" class="social" title="YouTube" href="https://youtube.com">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 24 24">
            <path fill="currentColor" d="M12.006 19.012h-.02c-.062 0-6.265-.012-7.83-.437a2.5 2.5 0 0 1-1.764-1.765A26.494 26.494 0 0 1 1.986 12a26.646 26.646 0 0 1 .417-4.817A2.564 2.564 0 0 1 4.169 5.4c1.522-.4 7.554-.4 7.81-.4H12c.063 0 6.282.012 7.831.437c.859.233 1.53.904 1.762 1.763c.29 1.594.427 3.211.407 4.831a26.568 26.568 0 0 1-.418 4.811a2.51 2.51 0 0 1-1.767 1.763c-1.52.403-7.553.407-7.809.407Zm-2-10.007l-.005 6l5.212-3l-5.207-3Z"/>
        </svg>
    </a>








    <a target="_blank" class="social" title="RSS Feed" href="/posts/index.xml">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 1280.000000 1280.000000">
            <g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentColor">
                <path d="M2295 11929 c-284 -12 -642 -45 -707 -65 -17 -5 -18 -63 -18 -1039 0 -569 4 -1036 8 -1039 5 -3 74 6 153 19 510 86 1168 95 1789 25 1348 -153 2602 -677 3670 -1531 385 -308 820 -744 1126 -1129 842 -1060 1362 -2313 1514 -3650 70 -621 61 -1279 -25 -1789 -13 -79 -22 -148 -19 -153 3 -4 471 -8 1039 -8 l1035 0 5 23 c51 225 85 942 67 1419 -23 605 -77 1044 -198 1617 -294 1400 -927 2734 -1823 3846 -1043 1295 -2364 2259 -3909 2854 -1158 447 -2451 656 -3707 600z"/>
                <path d="M2255 7845 c-269 -25 -620 -81 -667 -106 -17 -9 -18 -55 -18 -899 0 -706 3 -890 13 -890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207 -107 2267 -823 2814 -1902 166 -327 268 -637 330 -1001 38 -227 48 -384 42 -662 -8 -348 -44 -590 -126 -831 -23 -66 -41 -126 -41 -132 0 -10 184 -13 890 -13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782 -59 703 -233 1323 -545 1945 -481 956 -1313 1788 -2270 2268 -620 310 -1239 483 -1940 542 -165 14 -669 10 -840 -5z"/>
                <path d="M2519 3815 c-391 -66 -725 -336 -868 -703 -79 -201 -96 -462 -45 -677 83 -344 338 -641 666 -774 116 -47 205 -69 330 -80 412 -39 811 153 1040 500 193 292 240 648 128 981 -135 403 -492 699 -914 757 -100 14 -241 12 -337 -4z"/>
            </g>
        </svg>
    </a>


    <a target="_blank" class="social" title="Email" href="mailto://user@domain">
       <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 485.211 485.211">
            <path fill="currentColor" d="M301.393,241.631L464.866,424.56H20.332l163.474-182.928l58.801,51.443L301.393,241.631z M462.174,60.651H23.027 l219.579,192.142L462.174,60.651z M324.225,221.67l160.986,180.151V80.792L324.225,221.67z M0,80.792v321.029L160.972,221.64 L0,80.792z"/>
       </svg>
    </a>


        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Adam Coding Corner. All rights reserved.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <div class="info">
  <h1 class="post-title">
    <a href="//localhost:1313/kotlin-static-factory-methods/">Kotlin Static Factory Methods</a>
  </h1>

  <div class="headline">
    <div>
      
      <time datetime=" 2021-02-14T00:00:00Z" class="post-date">
        February 14, 2021
      </time>
      
      <span> - </span>
      <span class="reading-time">
        
          
        

        <span>10 mins read</span>
      </span>
    </div>

    
    <ul class="tags">
      
      <li class="tag-design patterns">
        <a href="//localhost:1313/tags/design-patterns">design patterns</a>
      </li>
      
      <li class="tag-Kotlin">
        <a href="//localhost:1313/tags/kotlin">Kotlin</a>
      </li>
      
      <li class="tag-Static Factory Methods">
        <a href="//localhost:1313/tags/static-factory-methods">Static Factory Methods</a>
      </li>
      
      <li class="tag-construction design pattern">
        <a href="//localhost:1313/tags/construction-design-pattern">construction design pattern</a>
      </li>
      
    </ul>
    
  </div>

  
  
  <p class="seriesname">
    Series: <a href="//localhost:1313/series/kotlin-design-patterns">Kotlin Design Patterns</a>
  </p>
  

  
</div>

  <h1 id="purpose">Purpose</h1>
<p>There is a concise error in the title, there are no static methods in Kotlin. But there are ways to achieve similar behavior to proposed by Joshua Bloch in Effective Java book - using static factory methods instead of constructors. This is also completely different from the Factory Method design pattern, don&rsquo;t confuse those.</p>
<p>Long story short, these are methods that create object instances based on supplied arguments (or even without them) and that you can call from anywhere without the need of having an instance of a class that contains them. To do so in Java, you would use the <code>static</code> keyword, which means that method is part of a class (understood as a type) rather than an object, and you can call it without creating an instance. We don&rsquo;t have this possibility in Kotlin, but we can get a similar effect with <code>companion object</code>.</p>
<h1 id="example-usage">Example usage</h1>
<p>Even if the phrase &ldquo;static factory method&rdquo; sounds alien, I&rsquo;m sure you saw it being used in code. Typical static factory methods may look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> locale = <span style="color:#a6e22e">Locale</span>.forLanguageTag(<span style="color:#e6db74">&#34;PL&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> today = <span style="color:#a6e22e">LocalDate</span>.now(<span style="color:#a6e22e">ZoneId</span>.of(<span style="color:#e6db74">&#34;GMT&#34;</span>))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> time = <span style="color:#a6e22e">LocalDateTime</span>.of(<span style="color:#ae81ff">2021</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">34</span>, <span style="color:#ae81ff">23</span>, <span style="color:#ae81ff">123</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> someNumber = <span style="color:#a6e22e">Double</span>.fromBits(<span style="color:#ae81ff">0x10000000000000L</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> formattedPi = <span style="color:#a6e22e">String</span>.format(<span style="color:#e6db74">&#34;%.2f&#34;</span>, <span style="color:#ae81ff">3.14159265358979323</span>)
</span></span></code></pre></div><p>Also, every primitive type in Kotlin is created using one, not with a constructor.</p>
<h1 id="elements">Elements</h1>
<p>The main rule here will be to use well-named methods instead of constructor, that should be private just like in Builder Pattern. Popular factory method names are:</p>
<ul>
<li>
<p><code>from</code> or <code>valueOf</code> - type conversion method, it takes a single argument and returns another object with the same value</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> instant = <span style="color:#a6e22e">Instant</span>.now()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> date = <span style="color:#a6e22e">Date</span>.from(instant)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> prime = <span style="color:#a6e22e">BigInteger</span>.valueOf(<span style="color:#a6e22e">Long</span>.MAX_VALUE)
</span></span></code></pre></div></li>
<li>
<p><code>of</code> - the aggregating method, that takes multiple arguments and returns instance containing all of them</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> cutlery = <span style="color:#a6e22e">EnumSet</span>.of(Fork, Spoon, Knife)
</span></span></code></pre></div></li>
<li>
<p><code>instance</code>, <code>getInstance</code> or <code>instanceOf</code> - a method returning instance, often seen in Singletons (so not really in Kotlin :) ) it may take arguments and return the same instance for provided values but it&rsquo;s not guaranteed</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> luke: StackWalker = <span style="color:#a6e22e">StackWalker</span>.getInstance(options)
</span></span></code></pre></div></li>
<li>
<p><code>create</code> or <code>newInstance</code> - similar to <code>getInstance</code> but this time a new instance is guaranteed each time</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> array = <span style="color:#a6e22e">Array</span>.newInstance(String<span style="color:#f92672">::</span><span style="color:#66d9ef">class</span>.java, <span style="color:#ae81ff">10</span>)
</span></span></code></pre></div></li>
<li>
<p><code>get&lt;&lt;Type&gt;&gt;</code> - similar to <code>getInstance</code> but returns the same instance of the object when the factory method is in a separate class. <code>&lt;&lt;Type&gt;&gt;</code> is the type of returned object</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> path = <span style="color:#a6e22e">Path</span>.of(<span style="color:#e6db74">&#34;path&#34;</span>, <span style="color:#e6db74">&#34;to/file/store&#34;</span>)             <span style="color:#75715e">// already familiar method &#39;of()&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> fileStore: FileStore = <span style="color:#a6e22e">Files</span>.getFileStore(path)     <span style="color:#75715e">// &lt;&lt;Type&gt;&gt; to FileStore
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// in this case for the same `Path` instance, new `FileStore` instance will be created each time
</span></span></span></code></pre></div></li>
<li>
<p><code>new&lt;&lt;Type&gt;&gt;</code> - analogically to the previous example but for getting a new instance each time</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> br: BufferedReader = <span style="color:#a6e22e">Files</span>.newBufferedReader(path)
</span></span></code></pre></div></li>
</ul>
<p>The above-mentioned names are fairly generic, but nothing should stop you from using more descriptive like <code>forLanguageTag</code> or <code>fromBits</code> like in previous examples. The most important thing is for the static factory method name to go along with already known name patterns for this use-case. There is no other way to distinguish it from &ldquo;normal&rdquo; methods (that don&rsquo;t return an instance) at the first sight.</p>
<h2 id="companion-object">Companion Object</h2>
<p>So in Java, such methods had to be static members of a class, but in Kotlin we have <code>companion object</code>. It allows us to call the method without explicitly creating an instance of a class (but in fact, <code>object</code> is an instance). Programmers deeply anchored in Java often use it just as a container for keeping constants and methods that they want to be <code>static</code>, but it has many interesting features:</p>
<ul>
<li><code>companion object</code> is a special case of an inside-class <code>object</code> so a Kotlin Singleton</li>
<li>Its fields and methods behave similar to <code>static</code> ones in Java, but are still members of an instance with all its consequences, like access modifiers.</li>
<li>It can implement an interface or extend a class.</li>
<li>Class having <code>companion object</code> has access to its fields, even private ones.</li>
<li>Interfaces also can have <code>companion object</code>.</li>
<li>It&rsquo;s not being inherited, subclasses don&rsquo;t have access to parents object.</li>
<li>It&rsquo;s not accessible from the instance, just like the inner <code>object</code>.</li>
<li>It can have a name, but it&rsquo;s optional - by default it can be reached with the <code>Companion</code> name.</li>
<li>There can single <code>companion object</code> inside a class, but any number of normal <code>objects</code>.</li>
<li>Unlike <code>inner</code> classes it doesn&rsquo;t have access to fields and methods of the parent object, just like inside <code>object</code>.</li>
<li>Parent class name already points to <code>companion object</code>, there is no need to call it like <code>&lt;&lt;Class&gt;&gt;.Companion.&lt;&lt;method()&gt;&gt;</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// the companion object in InterestingObject class is extending this abstract class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Printer</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">getName</span>(): String
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">print</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> name = getName()
</span></span><span style="display:flex;"><span>        println(name)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// private constructor so instance of this class can&#39;t be created in traditional way
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">InterestingObject</span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">constructor</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">object</span> <span style="color:#a6e22e">Factory</span> : Printer() { <span style="color:#75715e">// ordinary inside object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">@JvmStatic</span> <span style="color:#75715e">// generating true static methods for Java interoperability
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">create</span>() = InterestingObject()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// only companion object override methods can be @JvmStatic
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">getName</span>(): String {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Interesting Object&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">companion</span> <span style="color:#66d9ef">object</span> CompanionFactory : Printer() { <span style="color:#75715e">// companion object with a custom name
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> secret = <span style="color:#e6db74">&#34;No one can know this&#34;</span> <span style="color:#75715e">// private companion object field, not accessable outside the class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">val</span> publicInfo = <span style="color:#e6db74">&#34;***** ***&#34;</span> <span style="color:#75715e">// publicly available field
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">create</span>() = InterestingObject()
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">@JvmStatic</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">getName</span>(): String {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Interesting Object from Companion&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// instance method has access to private companion object field
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">getSecret</span>() = secret
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> obj0 = InterestingObject() <span style="color:#75715e">// error, private constructor doesn&#39;t allow to create instance this way
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> obj1 = <span style="color:#a6e22e">InterestingObject</span>.create() <span style="color:#75715e">// method from CompanionFactory so from the companion object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> obj2 = <span style="color:#a6e22e">InterestingObject</span>.<span style="color:#a6e22e">Factory</span>.create() <span style="color:#75715e">// method from Factory object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> obj3 = <span style="color:#a6e22e">InterestingObject</span>.<span style="color:#a6e22e">CompanionFactory</span>.create() <span style="color:#75715e">// companion object method again but with unnecessary companion object name
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> secret = <span style="color:#a6e22e">InterestingObject</span>.<span style="color:#a6e22e">CompanionFactory</span>.secret <span style="color:#75715e">// error, no access to the private field in companion object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> secret2 = <span style="color:#a6e22e">InterestingObject</span>.create().getSecret() <span style="color:#75715e">// but you can get it from the instance method
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> publicInfo = <span style="color:#a6e22e">InterestingObject</span>.publicInfo <span style="color:#75715e">// this field is accessable from companion object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// calling abstract class methods
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> print1 = <span style="color:#a6e22e">InterestingObject</span>.print()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> print2 = <span style="color:#a6e22e">InterestingObject</span>.<span style="color:#a6e22e">Factory</span>.print()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> print3 = <span style="color:#a6e22e">InterestingObject</span>.<span style="color:#a6e22e">CompanionFactory</span>.print()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// error, you can&#39;t call in-class objects from the instance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">InterestingObject</span>.create().<span style="color:#a6e22e">Factory</span>.getName()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">InterestingObject</span>.create().<span style="color:#a6e22e">CompanionFactory</span>.getName()
</span></span></code></pre></div><p>The code example below shows incrementing variable <code>counter</code> each time when a new <code>CountMe</code> instance is created. Like I already wrote subclass <code>ReallyCountMe</code> doesn&rsquo;t have access to its parents <code>companion object</code>. Nonetheless, when a new <code>ReallyCountMe</code> instance is created <code>counter</code> is also being incremented.</p>
<p>It happens because parent constructor and <code>init</code> bloc is called each time, and <code>counter</code> field is part of Singleton - the <code>companion object</code>, so each time instance is created (parent or subclass) the same variable <code>counter</code> is incremented.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">open</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CountMe</span>(<span style="color:#66d9ef">val</span> objectName: String) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">init</span> {
</span></span><span style="display:flex;"><span>        count<span style="color:#f92672">++</span>  <span style="color:#75715e">// incrementing counter in companion object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">companion</span> <span style="color:#66d9ef">object</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> count = <span style="color:#ae81ff">0</span> <span style="color:#75715e">// every CountMe instance have access to this field
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">printCount</span>() = println(<span style="color:#e6db74">&#34;count = </span><span style="color:#e6db74">$count</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReallyCountMe</span>(<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> name: String): CountMe(name)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// usage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">CountMe</span>.printCount() <span style="color:#75715e">// prints 0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>CountMe(<span style="color:#e6db74">&#34;1&#34;</span>)
</span></span><span style="display:flex;"><span>CountMe(<span style="color:#e6db74">&#34;2&#34;</span>)
</span></span><span style="display:flex;"><span>CountMe(<span style="color:#e6db74">&#34;3&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">CountMe</span>.printCount() <span style="color:#75715e">// prints 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>ReallyCountMe(<span style="color:#e6db74">&#34;1&#34;</span>)
</span></span><span style="display:flex;"><span>ReallyCountMe(<span style="color:#e6db74">&#34;2&#34;</span>)
</span></span><span style="display:flex;"><span>ReallyCountMe(<span style="color:#e6db74">&#34;3&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">CountMe</span>.printCount() <span style="color:#75715e">// prints 6
</span></span></span></code></pre></div><p>Every <code>CountMe</code> instance has a reference to the same (and the only) <code>companion object</code> instance.</p>
<p>Another example from library <code>Fiel</code> (simple HTTP client), where <code>Result</code> subclasses are created with <code>companion object</code> methods:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Result</span>&lt;<span style="color:#66d9ef">out</span> V : Any?, <span style="color:#66d9ef">out</span> E : Exception&gt; {
</span></span><span style="display:flex;"><span><span style="color:#f92672">..</span>.
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">companion</span> <span style="color:#66d9ef">object</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Factory methods
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">fun</span> &lt;<span style="color:#a6e22e">E</span> : <span style="color:#a6e22e">Exception</span>&gt; <span style="color:#a6e22e">error</span>(ex: E) = Failure(ex)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fun</span> &lt;<span style="color:#a6e22e">V</span> : <span style="color:#a6e22e">Any</span>?&gt; <span style="color:#a6e22e">success</span>(v: V) = Success(v)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fun</span> &lt;<span style="color:#a6e22e">V</span> : <span style="color:#a6e22e">Any</span>?&gt; <span style="color:#a6e22e">of</span>(<span style="color:#66d9ef">value</span>: V?, fail: (() <span style="color:#f92672">-&gt;</span> Exception) = { Exception() }): Result&lt;V, Exception&gt; =
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">value</span><span style="color:#f92672">?.</span>let { success(<span style="color:#66d9ef">it</span>) } <span style="color:#f92672">?:</span> error(fail())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fun</span> &lt;<span style="color:#a6e22e">V</span> : <span style="color:#a6e22e">Any</span>?, <span style="color:#a6e22e">E</span>: <span style="color:#a6e22e">Exception</span>&gt; <span style="color:#a6e22e">of</span>(f: () <span style="color:#f92672">-&gt;</span> V): Result&lt;V, E&gt; = <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            success(f())
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (ex: Exception) {
</span></span><span style="display:flex;"><span>            error(ex <span style="color:#66d9ef">as</span> E)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="companion-object-extensions">Companion Object Extensions</h3>
<p>There are times where you don&rsquo;t have the chance to modify class <code>companion object</code>, like when it comes from 3rd party library. But if the class has the <code>companion object</code> then you can use <code>extension functions</code> on it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// --- external module, like 3rd party library ---
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ExternalClass</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">companion</span> <span style="color:#66d9ef">object</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ExternalClassWithoutCompanion</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Car</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">companion</span> <span style="color:#66d9ef">object</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// --- internal module ---
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Ferrari</span>: Car <span style="color:#75715e">// internal class implementing interface from the library
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">Car</span>.<span style="color:#a6e22e">Companion</span>.getFerrari():Ferrari = Ferrari() <span style="color:#75715e">// library class extension method creating instance of internal class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// usage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> ferrari = <span style="color:#a6e22e">Car</span>.getFerrari()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// other extensions function examples
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">ExternalClass</span>.<span style="color:#a6e22e">Companion</span>.newMethod() = <span style="color:#e6db74">&#34;Wow! Extending class companion&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">Car</span>.<span style="color:#a6e22e">Companion</span>.newMethod() = <span style="color:#e6db74">&#34;Wow! Extending interface companion&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">ExternalClassWithoutCompanion</span>.<span style="color:#a6e22e">Companion</span>.newMethod() = <span style="color:#e6db74">&#34;Wow!&#34;</span> <span style="color:#75715e">// error, this class has no companion object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">ExternalClassWithoutCompanion</span>.newMethod() = <span style="color:#e6db74">&#34;Wow!&#34;</span> <span style="color:#75715e">// extension method for the class instance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// usage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ExternalClass</span>.newMethod() <span style="color:#75715e">// new extension method of ExternalClass companion object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ExternalClassWithoutCompanion</span>.newMethod() <span style="color:#75715e">// error, newMethod() is instance method, not companion object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>ExternalClassWithoutCompanion().newMethod() <span style="color:#75715e">// this will work, extension method is used on the instance
</span></span></span></code></pre></div><p>Again using <code>Fuel</code> library, where <code>Result</code> class has <code>companion object</code>. <code>Result</code> class itself is <code>sealed</code> so you cant extend it outside its module.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">Result</span>.<span style="color:#a6e22e">Companion</span>.awersomeNewMethod(){
</span></span><span style="display:flex;"><span>    println(<span style="color:#e6db74">&#34;This wasn&#39;t originally here&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//usage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">Result</span>.awersomeNewMethod()
</span></span></code></pre></div><p>Using <code>companion object</code> can make clients of your APIs lives much easier, even if you put an empty one in a public class or interface. It allows them to extend functionality without building wrappers or extending classes - and this is why a lot of Kotlin features exist in the first place.</p>
<h1 id="alternative---top-level-functions">Alternative - Top-level functions</h1>
<p>Another interesting way of creating instances are <code>top-level functions</code>, known for example from:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> intList = listOf(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> someSet = setOf(<span style="color:#e6db74">&#34;1&#34;</span>, <span style="color:#e6db74">&#34;2&#34;</span>, <span style="color:#e6db74">&#34;3&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> someMap = mapOf(<span style="color:#ae81ff">1</span> to <span style="color:#e6db74">&#34;1&#34;</span>, <span style="color:#ae81ff">2</span> to <span style="color:#e6db74">&#34;2&#34;</span>)
</span></span></code></pre></div><p>They are especially useful for creating simple but often used objects like lists or maps. Like the name may suggest those functions exist outside (above?) of the classes, and for that reason, they are publicly available (ok, they can be also private but whats the point then?). You should be aware of accidental function shadowing, for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// adding such function in the project
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">listOf</span>(<span style="color:#66d9ef">vararg</span> item: Int) = item.asList()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// we are shadowing function from kotlin.collections without any trace in code it self (no additional imports)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> intList = listOf(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>)   <span style="color:#75715e">// our top-level function
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> intList2 = listOf(<span style="color:#e6db74">&#34;1&#34;</span>, <span style="color:#e6db74">&#34;2&#34;</span>) <span style="color:#75715e">// function from kotlin.collections
</span></span></span></code></pre></div><p>It&rsquo;s not necessarily evil, but it may surprise you. So it&rsquo;s smarter to avoid too generic names, and not abuse <code>top-level functions</code>. Also to not litter IDE suggestions, because they will be popping out there.</p>
<h1 id="summary">Summary</h1>
<p>Kotlin with its syntactic sugar, such as named arguments, makes writing code much more pleasant than Java. Still using methods to create instances instead of constructors is often a good idea. Static Factory Methods are often used in Kotlin itself or by 3rd party library creators.</p>
<p>I tried to show interesting ways of using <code>companion object</code> which <strong>is not just a container for constants</strong>, or is emulating the <code>static</code> keyword from Java. Kotlin creators are extensively using it, for example in Coroutines - so I guess we should too.</p>
<h2 id="pros">Pros</h2>
<ul>
<li>
<p><strong>methods have descriptive names</strong></p>
<p>Some languages allow naming constructors, unfortunately not Kotlin or Java. Static Factory Methods are a way of achieving this functionality.</p>
</li>
<li>
<p><strong>methods can take same the argument types in the same order</strong></p>
<p>As long as they have different names, the list of arguments may be identical. You can&rsquo;t get this with a barebone constructor. Named arguments and default values may cover this issue just a bit.</p>
</li>
<li>
<p><strong>you don&rsquo;t always need a new instance</strong></p>
<p>The constructor will always create a new instance, but method may first check some cache and return instance that is already created.</p>
</li>
<li>
<p><strong>any subtype can be returned</strong></p>
<p>This subtype may not even be public. You can create a <code>companion object</code> inside an interface and return instances of the internal types that implement it. Client will see only the public interface.</p>
</li>
</ul>
<h2 id="cons">Cons</h2>
<ul>
<li>
<p><strong>you can&rsquo;t extend a class that have only a private constructor</strong></p>
<p>But this can always be a strong suggestion to use composition over inheritance :)</p>
</li>
<li>
<p><strong>no easy way to distinguish Static Factory Methods from usual methods</strong></p>
<p>Using constructor is clearly visible in the code, but the factory method looks like any other method. The automated documentation generation also won&rsquo;t be picking those methods as ways to create instance. Using common nomenclature for naming static factory methods may help, examples are <a href="#elements">here</a></p>
</li>
</ul>

  
  <hr>
<div class="footer">
    
    
    
    <p>
    This is a post in the <b><a href="//localhost:1313/series/kotlin-design-patterns">Kotlin Design Patterns</a></b> series.
        <br>Other posts in this series:
        <ul class="series">
            
            
            
            <li>
                August 22, 2021 -
                
                    <a href="/kotlin-command-pattern/">Command Pattern in Kotlin</a>
                
            </li>
            
            <li>
                July 17, 2021 -
                
                    <a href="/kotlin_mediator_pattern/">Mediator in Kotlin</a>
                
            </li>
            
            <li>
                July 3, 2021 -
                
                    <a href="/kotlin-decorator-pattern/">Decorator Pattern in Kotlin</a>
                
            </li>
            
            <li>
                June 26, 2021 -
                
                    <a href="/kotlin-adapter-pattern/">Adapter Pattern in Kotlin</a>
                
            </li>
            
            <li>
                June 7, 2021 -
                
                    <a href="/kotlin-facade-pattern/">Facade Pattern in Kotlin</a>
                
            </li>
            
            <li>
                May 30, 2021 -
                
                    <a href="/kotlin-strategy-pattern/">Strategy Pattern in Kotlin</a>
                
            </li>
            
            <li>
                May 13, 2021 -
                
                    <a href="/kotlin-template-method/">Kotlin Template Method</a>
                
            </li>
            
            <li>
                March 2, 2021 -
                
                    <a href="/kotlin-abstract-factory/">Kotlin Abstract Factory</a>
                
            </li>
            
            <li>
                February 26, 2021 -
                
                    <a href="/kotlin-factory-method/">Kotlin Factory Method</a>
                
            </li>
            
            <li>
                February 14, 2021 -
                
                    Kotlin Static Factory Methods
                
            </li>
            
            <li>
                January 29, 2021 -
                
                    <a href="/kotlin-builder-pattern/">Kotlin Builder Pattern</a>
                
            </li>
            
        </ul>
    </p>
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#companion-object">Companion Object</a>
      <ul>
        <li><a href="#companion-object-extensions">Companion Object Extensions</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#pros">Pros</a></li>
    <li><a href="#cons">Cons</a></li>
  </ul>
</nav>
    </div>
</div>

  

        </div>
    </body>
</html>


