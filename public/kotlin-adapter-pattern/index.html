<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.91ae35f985ba4ae6473b8defee39551f3ce6ed2769fdfa9b3df93f2eac0da4bc.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/assets/favicon.ico>

    
    





  





  
  
  


<!-- Open Graph image and Twitter Card metadata -->

<title itemprop="name">Adam Świderski - Adapter Pattern in Kotlin</title>
<meta property="og:title" content=Adam&#32;Świderski&#32;-&#32;Adapter&#32;Pattern&#32;in&#32;Kotlin />
<meta name="twitter:title" content=Adam&#32;Świderski&#32;-&#32;Adapter&#32;Pattern&#32;in&#32;Kotlin />
<meta itemprop="name" content=Adam&#32;Świderski&#32;-&#32;Adapter&#32;Pattern&#32;in&#32;Kotlin />
<meta name="application-name" content=Adam&#32;Świderski&#32;-&#32;Adapter&#32;Pattern&#32;in&#32;Kotlin />
<meta property="og:site_name" content="Adam Coding Corner" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="//localhost:1313/kotlin-adapter-pattern/" />
<link rel="canonical" href="//localhost:1313/kotlin-adapter-pattern/" itemprop="url" />
<meta name="url" content="//localhost:1313/kotlin-adapter-pattern/" />
<meta name="twitter:url" content="//localhost:1313/kotlin-adapter-pattern/" />
<meta property="og:url" content="//localhost:1313/kotlin-adapter-pattern/" />


<meta property="og:updated_time" content=26006-26-12T60:00:21Z />


<link rel="sitemap" type="application/xml" title="Sitemap" href='//localhost:1313/sitemap.xml' />

<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Adam Coding Corner" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />





<meta property="og:type" content="article" />
<meta property="article:publisher" content="" />
<meta property="og:article:published_time" content=26006-26-12T60:00:21Z />
<meta property="article:published_time" content=26006-26-12T60:00:21Z />








<meta name="generator" content="Hugo 0.123.7">


    
    

<link type="text/css" rel="stylesheet" href="/css/bundle.min.684be08038c8e02f27eed57328c70b4a2b8156ece14b38d3a7c0d860ea16edb9.css">


    
    <style>
    body {
        --sidebar-bg-color: #202020;
        --sidebar-img-border-color: #515151;
        --sidebar-p-color: #909090;
        --sidebar-h1-color: #FFF;
        --sidebar-a-color: #FFF;
        --sidebar-socials-color: #FFF;
        --text-color: #222;
        --bkg-color: #FAF9F6;
        --post-title-color: #303030;
        --list-color: #5A5A5A;
        --link-color: #268BD2;
        --date-color: #515151;
        --table-border-color: #E5E5E5;
        --table-stripe-color: #F9F9F9;
        --code-color: #000;
        --code-background-color: #E5E5E5;
        --code-block-color: #FFF;
        --code-block-background-color: #272822;
        --moon-sun-color: #FFF;
        --moon-sun-background-color: #515151;
    }
    body.dark-theme {
        --text-color: #EEE;
        --bkg-color: #121212;
        --post-title-color: #DBE2E9;
        --list-color: #bebebe;
        --link-color: #268BD2;
        --date-color: #9A9A9A;
        --table-border-color: #515151;
        --table-stripe-color: #202020;
        --code-color: #FFF;
        --code-background-color: #515151;
        --code-block-color: #FFF;
        --code-block-background-color: #272822;
    }
    body {
        background-color: var(--bkg-color);
    }
</style>

</head>

    <body class="dark-theme">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
            <a href="//localhost:1313/">
                <img src="/assets/profile_picture.png" alt="brand image">
            </a>
        
        
            <a href="//localhost:1313/">
                <h1>Adam Świderski</h1>
            </a>
        
    </h1>
    <p class="lead">
    software engineer
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">
        
        
        
        
            

            
                
                
                    <li class="heading">
                        <a href="/about/">About</a>
                    </li>
                    
                
            
                
                
            
                
                
            
            
                
                
                        
                
                        
                
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
        
        
            

            
                
                
            
                
                
                    <li class="heading">
                        <a href="/posts/">Posts</a>
                    </li>
                    
                        <li class="sub-heading">
                            Recent
                        </li>
                        
                            <li class="bullet">
                                <a href="//localhost:1313/2024-02-24-MVI/">Android Presentation Patterns: MVI</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="//localhost:1313/2024-02-09-MVVM/">Android Presentation Patterns: MVVM</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="//localhost:1313/2024-01-29-MVP/">Android Presentation Patterns: MVP</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="//localhost:1313/2024-01-27-MVC/">Android Presentation Patterns: MVC</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="//localhost:1313/2023-06-16-ci-is-your-friend/">Continuous Integration and Deployment: A Developer&#39;s Best Friends</a>
                            </li>
                        
                    
                
            
                
                
            
            
                
                
                        
                
                        
                
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
        

    </ul>
</nav>

        
    <a target="_blank" class="social" title="GitHub" href="https://github.com">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="-2 -2 24 24">
            <path fill="currentColor" d="M18.88 1.099C18.147.366 17.265 0 16.233 0H3.746C2.714 0 1.832.366 1.099 1.099C.366 1.832 0 2.714 0 3.746v12.487c0 1.032.366 1.914 1.099 2.647c.733.733 1.615 1.099 2.647 1.099H6.66c.19 0 .333-.007.429-.02a.504.504 0 0 0 .286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555 0 0 1-.904-.091a2.026 2.026 0 0 1-.872-.39a1.651 1.651 0 0 1-.572-.8l-.13-.3a3.25 3.25 0 0 0-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956 0 0 1-.17-.156a.723.723 0 0 1-.117-.182c-.026-.061-.004-.111.065-.15c.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1 0 0 1 .631.677c.2.355.44.626.722.813c.282.186.566.28.852.28c.286 0 .533-.022.742-.065a2.59 2.59 0 0 0 .585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907 0 0 1-1.333-.234a5.314 5.314 0 0 1-1.223-.507a3.5 3.5 0 0 1-1.047-.872c-.277-.347-.505-.802-.683-1.365c-.177-.564-.266-1.215-.266-1.952c0-1.049.342-1.942 1.027-2.68c-.32-.788-.29-1.673.091-2.652c.252-.079.625-.02 1.119.175c.494.195.856.362 1.086.5c.23.14.414.257.553.352a9.233 9.233 0 0 1 2.497-.338c.859 0 1.691.113 2.498.338l.494-.312a6.997 6.997 0 0 1 1.197-.572c.46-.174.81-.221 1.054-.143c.39.98.424 1.864.103 2.653c.685.737 1.028 1.63 1.028 2.68c0 .737-.089 1.39-.267 1.957c-.177.568-.407 1.023-.689 1.366a3.65 3.65 0 0 1-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9 0 0 1-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36 0 0 0 .208.189c.096.034.18.056.254.064c.074.01.18.013.318.013h2.914c1.032 0 1.914-.366 2.647-1.099c.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/>
        </svg>
    </a>



    <a target="_blank" class="social" title="LinkedIn" href="https://linkedin.com">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 448 512">
            <path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5c0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7c-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5c67.2 0 79.7 44.3 79.7 101.9V416z"/>
        </svg>
    </a>






    <a target="_blank" class="social" title="YouTube" href="https://youtube.com">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 24 24">
            <path fill="currentColor" d="M12.006 19.012h-.02c-.062 0-6.265-.012-7.83-.437a2.5 2.5 0 0 1-1.764-1.765A26.494 26.494 0 0 1 1.986 12a26.646 26.646 0 0 1 .417-4.817A2.564 2.564 0 0 1 4.169 5.4c1.522-.4 7.554-.4 7.81-.4H12c.063 0 6.282.012 7.831.437c.859.233 1.53.904 1.762 1.763c.29 1.594.427 3.211.407 4.831a26.568 26.568 0 0 1-.418 4.811a2.51 2.51 0 0 1-1.767 1.763c-1.52.403-7.553.407-7.809.407Zm-2-10.007l-.005 6l5.212-3l-5.207-3Z"/>
        </svg>
    </a>








    <a target="_blank" class="social" title="RSS Feed" href="/posts/index.xml">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 1280.000000 1280.000000">
            <g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentColor">
                <path d="M2295 11929 c-284 -12 -642 -45 -707 -65 -17 -5 -18 -63 -18 -1039 0 -569 4 -1036 8 -1039 5 -3 74 6 153 19 510 86 1168 95 1789 25 1348 -153 2602 -677 3670 -1531 385 -308 820 -744 1126 -1129 842 -1060 1362 -2313 1514 -3650 70 -621 61 -1279 -25 -1789 -13 -79 -22 -148 -19 -153 3 -4 471 -8 1039 -8 l1035 0 5 23 c51 225 85 942 67 1419 -23 605 -77 1044 -198 1617 -294 1400 -927 2734 -1823 3846 -1043 1295 -2364 2259 -3909 2854 -1158 447 -2451 656 -3707 600z"/>
                <path d="M2255 7845 c-269 -25 -620 -81 -667 -106 -17 -9 -18 -55 -18 -899 0 -706 3 -890 13 -890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207 -107 2267 -823 2814 -1902 166 -327 268 -637 330 -1001 38 -227 48 -384 42 -662 -8 -348 -44 -590 -126 -831 -23 -66 -41 -126 -41 -132 0 -10 184 -13 890 -13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782 -59 703 -233 1323 -545 1945 -481 956 -1313 1788 -2270 2268 -620 310 -1239 483 -1940 542 -165 14 -669 10 -840 -5z"/>
                <path d="M2519 3815 c-391 -66 -725 -336 -868 -703 -79 -201 -96 -462 -45 -677 83 -344 338 -641 666 -774 116 -47 205 -69 330 -80 412 -39 811 153 1040 500 193 292 240 648 128 981 -135 403 -492 699 -914 757 -100 14 -241 12 -337 -4z"/>
            </g>
        </svg>
    </a>


    <a target="_blank" class="social" title="Email" href="mailto://user@domain">
       <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 485.211 485.211">
            <path fill="currentColor" d="M301.393,241.631L464.866,424.56H20.332l163.474-182.928l58.801,51.443L301.393,241.631z M462.174,60.651H23.027 l219.579,192.142L462.174,60.651z M324.225,221.67l160.986,180.151V80.792L324.225,221.67z M0,80.792v321.029L160.972,221.64 L0,80.792z"/>
       </svg>
    </a>


        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Adam Coding Corner. All rights reserved.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <div class="info">
  <h1 class="post-title">
    <a href="//localhost:1313/kotlin-adapter-pattern/">Adapter Pattern in Kotlin</a>
  </h1>

  <div class="headline">
    <div>
      
      <time datetime=" 2021-06-26T00:00:00Z" class="post-date">
        June 26, 2021
      </time>
      
      <span> - </span>
      <span class="reading-time">
        
          
        

        <span>11 mins read</span>
      </span>
    </div>

    
    <ul class="tags">
      
      <li class="tag-design patterns">
        <a href="//localhost:1313/tags/design-patterns">design patterns</a>
      </li>
      
      <li class="tag-Kotlin">
        <a href="//localhost:1313/tags/kotlin">Kotlin</a>
      </li>
      
      <li class="tag-Adapter Pattern">
        <a href="//localhost:1313/tags/adapter-pattern">Adapter Pattern</a>
      </li>
      
      <li class="tag-structural design pattern">
        <a href="//localhost:1313/tags/structural-design-pattern">structural design pattern</a>
      </li>
      
    </ul>
    
  </div>

  
  
  <p class="seriesname">
    Series: <a href="//localhost:1313/series/kotlin-design-patterns">Kotlin Design Patterns</a>
  </p>
  

  
</div>

  <h1 id="purpose">Purpose</h1>
<p>As the name suggests, the <code>Adapter</code> pattern transforms the class interface to another one requested by the client. Using the <code>Adapter</code> allows incompatible classes to interact with each other. Another term for this pattern is <code>Wrapper</code>.</p>
<p>The adapter allows you to &ldquo;map&rdquo; an adapted interface (<code>Adaptee</code>) to the expected interface (<code>Target</code>) by the client class without adding another level of inheritance. Such inheritance would not always be possible if <code>Target</code> was a class rather than an interface. The new class would have to be both <code>Target</code> and<code> Adaptee</code> at the same time.</p>
<p>Instead of creating a new <code>Adapter</code> class, you may also add a method in the client that takes an object with an <code>Adaptee</code> interface, but it will cause the class to expand with a lot of similar methods. The client class can also come from 3rd party dependency, and then it will not be possible to change it.</p>
<h1 id="implementation">Implementation</h1>
<p>The <code>adapter</code> is essentially a single class, but it&rsquo;s important to understand its surroundings.</p>
<pre class="mermaid" style="background-color: #FAF9F6 !important;">classDiagram
    class Client {
        - useTarget()
    }

    class Target {
         << interface >>
        + method()
    }

    class Adapter {
        -Adaptee adaptee
        + method()
    }

    class Adaptee {
         << interface >>
        + otherMethod()
    }

    Adapter ..|> Target
    Adapter --* Adaptee
    Client --> Target
    Adapter --> Adaptee : calls otherMethod()
</pre>
<ul>
<li><strong>Client</strong> - class that uses the <code>Target</code> object</li>
<li><strong>Target</strong> - interface required by the <code>Client</code> class</li>
<li><strong>Adapter</strong> - class with the <code>Target</code> interface that adapts the<code> Adaptee</code> object, most often the adapted object will be assigned to the field in this class</li>
<li><strong>Adaptee</strong> - an adapted class with an incompatible interface that we want to use with <code>Client</code></li>
</ul>
<h2 id="abstract">Abstract</h2>
<p>In the code, the diagram above might look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Client</span>(<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> target: Target) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> argument = BigDecimal(<span style="color:#ae81ff">10.0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">doWork</span>() {
</span></span><span style="display:flex;"><span>        target.method(argument)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// the client will accept only this interface
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Target</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">method</span>(argument: BigDecimal): Double
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// and this is the interface we want to use with the client
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Adaptee</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">originalMethod</span>(argument: CustomArgument): CustomResult
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// the Adapter implementing Target interface and taking the Adaptee in the constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Adapter</span>(<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> adaptee: Adaptee) : Target {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">method</span>(argument: BigDecimal): Double {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> stringArgument = argument.toCustomArgument()
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// calling method from adapted interface
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> adaptee.originalMethod(stringArgument).toDouble()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// usage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> target1: Target = TargetImpl()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> adaptee: Adaptee = AdapteeImpl()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> adapter: Target = Adapter(adaptee)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> client1: Client = Client(target1)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> client2: Client = Client(adaptee) <span style="color:#75715e">// error! wrong interface
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">val</span> client3: Client = Client(adapter) <span style="color:#75715e">// using the Adapter with Adaptee instance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>You can see here how the <code>Adapter</code> class uses the <code>Adaptee</code> object within the <code>Target</code> interface. The <code>Adapter</code> encapsulates the logic of mapping one interface to another. This avoids unnecessary extending or modifying the client or <code>Adaptee</code> only for a specific client.</p>
<p>Different clients can use different adapters of the same <code>Adaptee</code> class. Thanks to this, there is no need to adapt <code>Adaptee</code> to a specific client or several clients. Just look at this monster:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// Adaptee implements all interfaces expected by all clients
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Adaptee</span>: Target1, Target2, Target3{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// the only actual method of the Adaptee
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">originalMethod</span>(argument: CustomArgument): CustomResult
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// interface methods
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">target1Method</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">target2Method</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">target3Method</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>And with Adapters:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// unchanged Adaptee class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Adaptee</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">originalMethod</span>(argument: CustomArgument): CustomResult
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Adapters can be put in packages closer to the Client than to the Adaptee
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Adapter1</span>(<span style="color:#66d9ef">val</span> adaptee: Adaptee) : Target1{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">target1Method</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Adapter2</span>(<span style="color:#66d9ef">val</span> adaptee: Adaptee) : Target2{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">target2Method</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Adapter3</span>(<span style="color:#66d9ef">val</span> adaptee: Adaptee) : Target3{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">target3Method</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="list">List</h2>
<p>The adapter will work well for a list of elements on which we want to perform an operation for which they were not created.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// lets assume that this class is comming from 3rd party library
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// `data class` cannot be extended
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">data</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Item</span>(<span style="color:#66d9ef">val</span> name: String)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// and we have this interface in our system
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">PrettyPrintableItem</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">prettyPrint</span>(): String
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Adapter/Wrapper providing `PrettyPrintableItem` functionality for the `Item` object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ItemAdapter</span>(<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> item: Item) : PrettyPrintableItem {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">prettyPrint</span>(): String {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;hello, my name is: </span><span style="color:#e6db74">${item.name}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// usage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// list of items returned from 3rd party lib, that we want to &#34;pretty print&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">val</span> list: List&lt;Item&gt; = listOf(
</span></span><span style="display:flex;"><span>            Item(<span style="color:#e6db74">&#34;Adam&#34;</span>),
</span></span><span style="display:flex;"><span>            Item(<span style="color:#e6db74">&#34;Not Adam&#34;</span>),
</span></span><span style="display:flex;"><span>            Item(<span style="color:#e6db74">&#34;Adam Maybe&#34;</span>),
</span></span><span style="display:flex;"><span>            Item(<span style="color:#e6db74">&#34;Yes&#34;</span>),
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    list.forEach {
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// adapting item
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">val</span> adapted = ItemAdapter(<span style="color:#66d9ef">it</span>)
</span></span><span style="display:flex;"><span>        println(adapted.prettyPrint())
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Using the <code>Adapter</code> allows a clean link between classes that we have no control over (from external libraries) with our code with different interfaces. It is a good practice not to use the 3rd party interfaces in the whole system, if possible, but only at the point where the library meets our code. That provides the exchangeability of libraries, easy version update, and protects your code from the forced changes dictated by API alterations in independent software pieces.</p>
<p>I realize that this is not always possible, and sometimes it is even not worth creating an intermediate interface. However, it would be stupid in a long-lived project that multiple teams are working on to have a problem because some silly utils library changed its API after update.</p>
<h2 id="duck-typing">Duck Typing</h2>
<p>If something quacks like a duck, swims like a duck and flies like a duck, it must be a duck. Contrary to <code>strong typing</code> where we know for 100% that the object is a duck because it inherits from the class <code>Duck</code>, here we are interested in the available behavior of the object. You can see that in Python or JavaScript. Kotlin is strongly typed language, and does not allow for multi-inheritance, but extension functions do allow you to &ldquo;append&rdquo; functionality to a class. So we can have a species-fluid dog:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">York</span>: Dog{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">bark</span>(){}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// adding `quacking` to York class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">York</span>.quack(){}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>York().bark()
</span></span><span style="display:flex;"><span><span style="color:#75715e">// and now it quacks
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>York().quack()
</span></span></code></pre></div><p><img src="assets/posts/york_duck.jpg" alt="York duck">{: .center-image }</p>
<p>This York doesn&rsquo;t look happy. And it&rsquo;s definitely not a duck. But if it can quack, and that&rsquo;s all we need, it should be good enough?</p>
<p>Going back to the list example, instead of creating an <code>Adapter</code>, it would be enough to add an extension function for <code>Item</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">Item</span>.prettyPrint(): String {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;hello, my name is: </span><span style="color:#e6db74">${this.name}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Item now is able to &#34;pretty print&#34; itself without additional Adapter
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>list.forEach {
</span></span><span style="display:flex;"><span>	println(<span style="color:#66d9ef">it</span>.prettyPrint())
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// previous version with Adapter
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>list.forEach {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> adapted = ItemAdapter(<span style="color:#66d9ef">it</span>)
</span></span><span style="display:flex;"><span>    println(adapted.prettyPrint())
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>Extension functions</code> are generally a great feature, and in such a simple example, they&rsquo;ll probably do a better job than the additional <code>Adapter</code> class. They can also be added to classes that we have no control over, such as those from libraries.</p>
<p>The problem arises when we start adding more and more of these functions to a specific class, in various places in the code. The IDE is great at suggesting possible methods, you can easily jump to implementation, but during the code review, it can be hard to figure out where the class has a given method from - because it is not in the class implementation. It can also obscure the class interface or implicitly override methods.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Item</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FirstItem</span> : Item
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AnotherItem</span> : Item
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// extension function for generic interface `Item`
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">Item</span>.prettyPrint(): String = <span style="color:#e6db74">&#34;hello, I&#39;m: </span><span style="color:#e6db74">$this</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// extension function for concrete class `AnotherItem`
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">AnotherItem</span>.betterPrint(): String = <span style="color:#e6db74">&#34;greetings, I&#39;m: </span><span style="color:#e6db74">$this</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// extension function overriding `prettyPrint` from the `Item` interface
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">AnotherItem</span>.prettyPrint(): String = <span style="color:#e6db74">&#34;yo, I&#39;m: </span><span style="color:#e6db74">$this</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> item1: Item = FirstItem()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> item2: Item = AnotherItem()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> item3: AnotherItem = AnotherItem()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    item1.prettyPrint()
</span></span><span style="display:flex;"><span>    item2.prettyPrint()
</span></span><span style="display:flex;"><span>    item3.prettyPrint() <span style="color:#75715e">// which method will be called here?
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    item3.betterPrint()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In this example, I have added 3 extension functions. The case of <code>prettyPrint</code> is especially interesting, where the implementation is different for the generic<code> Item</code> interface and for the specific <code>AnotherItem</code> class. The IDE and the compiler don&rsquo;t see any problem. The second method will be just used with <code>AnotherItem</code>. The <code>extension functions</code> can be written anywhere in your code, even in very distant places from where the class is declared.</p>
<p>Imagine a situation where you created the <code>extension function</code> to a generic interface and used it for a long time without any issues with all the different types implementing this interface. At one point a completely different team needed an <code>extension function</code> for a concrete type, so someone wrote a method with the same name and signature at a convenient place in code (for them), overriding your method for the generic interface. Without any <code>override</code> keyword :) tests may catch it, but they don&rsquo;t have to. Code Review was probably done by someone on the other team, so until something starts behaving in an unexpected way, you probably won&rsquo;t find out about the entire operation. And then looking for the cause of the error may not be pleasant&hellip;</p>
<p>We have a few problems here:</p>
<ul>
<li>dependency on <code>extension functions</code> for an interface that can be easily overwritten</li>
<li>spreading <code>extension functions</code> all over the system</li>
<li>code review limited to members of 1 team (this is a topic for a separate post)</li>
</ul>
<p>Closing all &ldquo;extended&rdquo; functionality in an Adapter, for example, <code>ItemPrinter</code> would avoid misunderstandings and aid code review. In Git, you can easily see who authored or recently modified this class and add them to a pull request as well. For <code>extension functions</code>, this option also exists, but methods can be scattered throughout the system, making it harder to find authors, and if something is more difficult than hassle-free, no one will do it.</p>
<h2 id="shapes">Shapes</h2>
<p>In post about <a href="https://asvid.github.io/kotlin-factory-method" target="_blank">Factory Method</a> I used geometrical shapes example, that fits nicely here:</p>
<p>For the record:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Shape</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">draw</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">createManipulator</span>(): ShapeManipulator&lt;<span style="color:#66d9ef">out</span> Shape&gt;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">ShapeManipulator</span>&lt;T : Shape&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">drag</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">resize</span>(scale: Float)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span> : Shape {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">draw</span>() {}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">createManipulator</span>() = CircleManipulator(<span style="color:#66d9ef">this</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CircleManipulator</span>&lt;T&gt;(<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> shape: T) : ShapeManipulator&lt;Circle&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">drag</span>() = println(<span style="color:#e6db74">&#34;CircleManipulator is manipulating circle </span><span style="color:#e6db74">$shape</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">resize</span>(scale: Float) = println(<span style="color:#e6db74">&#34;CircleManipulator is resizing circle </span><span style="color:#e6db74">$shape</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We have a <code>Shape</code> interface which is implemented by e.g.<code> Circle</code>. Additionally, each shape has its own &lsquo;ShapeManipulator&rsquo;, an object that knows how to modify the size, position, etc. of a specific shape.
The <code>Window</code> class displays the figures on the screen</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Window</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">drawShape</span>(shape: Shape) {
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// magic
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>And now we want to be able to display the text on the screen, next to the geometric shapes. However, the <code>TextView</code> class is not a shape, it has a different interface and comes from 3rd party library, for example. It is also such a complex class that there is no chance of rewriting it using the <code>Shape</code> interface, or changing the behavior of the <code>Window</code> class.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TextView</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">displayText</span>() {}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">changeSize</span>() {}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">changePosition</span>() {}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Let&rsquo;s use <code>Adapter</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TextViewAdapter</span>(<span style="color:#66d9ef">val</span> textView: TextView) : Shape {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">draw</span>() {
</span></span><span style="display:flex;"><span>        textView.displayText()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// anonymous object instead of separate class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">createManipulator</span>(): ShapeManipulator&lt;<span style="color:#66d9ef">out</span> Shape&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">object</span> <span style="color:#960050;background-color:#1e0010">: </span><span style="color:#a6e22e">ShapeManipulator</span>&lt;Shape&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">drag</span>() {
</span></span><span style="display:flex;"><span>                textView.changePosition()
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">resize</span>(scale: Float) {
</span></span><span style="display:flex;"><span>                textView.changeSize()
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Which for <code>Window</code> behaves like any other figure</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> window = Window()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> circle = Circle()
</span></span><span style="display:flex;"><span>    window.drawShape(circle)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> textView = TextView()
</span></span><span style="display:flex;"><span>    window.drawShape(textView) <span style="color:#75715e">// error! wrong interface
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    window.drawShape(TextViewAdapter(textView)) <span style="color:#75715e">// using Adapter
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>I have intentionally omitted here return types or display logic of elements. Such an &lsquo;Adapter&rsquo; in a real project would be much more complicated. But I hope the idea here is clear.</p>
<h1 id="naming">Naming</h1>
<p>Here I have mixed feelings about whether adding <code>Adapter</code> in the name is necessary. On the one hand, it&rsquo;s clear information that the object only maps one interface to another. On the other hand, this information may not be needed at all, clients are only interested in the interface. Does <code>ItemAdapter</code> or <code>ItemWrapper</code> say more than <code>ItemWithPrettyPrint</code>? Moreover, if we create more adapters for different clients for <code>Item</code>, naming them <code>ItemForClient1Adapter</code> doesn&rsquo;t look great.</p>
<p>Therefore, I tend to name adapters from the object they adapt (<code>Adaptee</code>), and the interface they implement (<code>Target</code>).</p>
<h1 id="summary">Summary</h1>
<p>The Adapter or Wrapper Pattern allows you to &ldquo;translate&rdquo; one interface into another, expected by the client class. It is especially useful when the adapted object comes from 3rd party library, and you do not want to make your system depending on that interface, creating the so-called <code>anticorruption layer</code>. Adaptee interface changes will only affect the <code>Adapter</code> and not the rest of the code.</p>
<p>Kotlin allows, through the <code>extension functions</code>, to provide<code> Adapter</code>-like functionality without having to create an entirely new class. This will make sense when you are not interested in the type of object but its capabilities, which is often referred to as <code>Duck Typing</code>. However, <code>extension functions</code> can obscure the actual class interface, override one another, and cause chaos in general. By limiting their scope, you can deal with it, but if their number starts growing for a specific class, it may be worth setting up a separate wrapper class to organize them.</p>
<h2 id="consequences">Consequences</h2>
<ul>
<li><strong>single responsibility principle</strong> - you do not need to change the class adapted for a specific client, only add an <code>Adapter</code> with the required interface. The adapted class can change independently of the clients, and it is the job of the <code>Adapter</code> to reconcile these changes with the client interface.</li>
<li><strong>anticorruption layer</strong> - separates the interface you have no control over and &ldquo;translates&rdquo; it into your own. Changes to the interface coming from a library, won&rsquo;t affect the system</li>
<li><strong>available for subclasses</strong> - as in the abstract example, creating an adapter for a generic interface allows the use of any class that implements that interface.</li>
<li><strong>be careful with extension functions</strong> - at times it may seem that the <code>extension function</code> will provide sufficient functionality, but in large projects with multiple teams working on the same code base, this may have unforeseen consequences. This problem can be partially solved by limiting the scope of <code>extension functions</code>.</li>
</ul>

  
  <hr>
<div class="footer">
    
    
    
    <p>
    This is a post in the <b><a href="//localhost:1313/series/kotlin-design-patterns">Kotlin Design Patterns</a></b> series.
        <br>Other posts in this series:
        <ul class="series">
            
            
            
            <li>
                August 22, 2021 -
                
                    <a href="/kotlin-command-pattern/">Command Pattern in Kotlin</a>
                
            </li>
            
            <li>
                July 17, 2021 -
                
                    <a href="/kotlin_mediator_pattern/">Mediator in Kotlin</a>
                
            </li>
            
            <li>
                July 3, 2021 -
                
                    <a href="/kotlin-decorator-pattern/">Decorator Pattern in Kotlin</a>
                
            </li>
            
            <li>
                June 26, 2021 -
                
                    Adapter Pattern in Kotlin
                
            </li>
            
            <li>
                June 7, 2021 -
                
                    <a href="/kotlin-facade-pattern/">Facade Pattern in Kotlin</a>
                
            </li>
            
            <li>
                May 30, 2021 -
                
                    <a href="/kotlin-strategy-pattern/">Strategy Pattern in Kotlin</a>
                
            </li>
            
            <li>
                May 13, 2021 -
                
                    <a href="/kotlin-template-method/">Kotlin Template Method</a>
                
            </li>
            
            <li>
                March 2, 2021 -
                
                    <a href="/kotlin-abstract-factory/">Kotlin Abstract Factory</a>
                
            </li>
            
            <li>
                February 26, 2021 -
                
                    <a href="/kotlin-factory-method/">Kotlin Factory Method</a>
                
            </li>
            
            <li>
                February 14, 2021 -
                
                    <a href="/kotlin-static-factory-methods/">Kotlin Static Factory Methods</a>
                
            </li>
            
            <li>
                January 29, 2021 -
                
                    <a href="/kotlin-builder-pattern/">Kotlin Builder Pattern</a>
                
            </li>
            
        </ul>
    </p>
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#abstract">Abstract</a></li>
    <li><a href="#list">List</a></li>
    <li><a href="#duck-typing">Duck Typing</a></li>
    <li><a href="#shapes">Shapes</a></li>
  </ul>

  <ul>
    <li><a href="#consequences">Consequences</a></li>
  </ul>
</nav>
    </div>
</div>

  

        </div>
    </body>
</html>



  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.esm.min.mjs';
    
    const lsTheme = localStorage.getItem("theme")
    const hugoTheme = document.body.classList.contains("dark-theme") ? "dark" : null
    const currTheme = lsTheme ? lsTheme : hugoTheme;
    const mermaidTheme = currTheme == "light" ? "default" : "dark"

    mermaid.initialize({
      theme: mermaidTheme, 
      startLoaded: true,
      logLevel: 1
    });
  </script>
