<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.91ae35f985ba4ae6473b8defee39551f3ce6ed2769fdfa9b3df93f2eac0da4bc.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/assets/favicon.ico>

    
    





  





  
  
  


<!-- Open Graph image and Twitter Card metadata -->

<title itemprop="name">Adam Świderski - Kotlin Builder Pattern</title>
<meta property="og:title" content=Adam&#32;Świderski&#32;-&#32;Kotlin&#32;Builder&#32;Pattern />
<meta name="twitter:title" content=Adam&#32;Świderski&#32;-&#32;Kotlin&#32;Builder&#32;Pattern />
<meta itemprop="name" content=Adam&#32;Świderski&#32;-&#32;Kotlin&#32;Builder&#32;Pattern />
<meta name="application-name" content=Adam&#32;Świderski&#32;-&#32;Kotlin&#32;Builder&#32;Pattern />
<meta property="og:site_name" content="My New Hugo Site" />


<meta name="description" content=" The Builder Design Pattern is one of most popular and useful construction patterns in software engineering. In this post I will try to explain it and show how you can use it with Kotlin. Sadly I often see implementations that are simple translation from Java rather that utilizing cool Kotlin syntactic sugar." />
<meta itemprop="description" content=" The Builder Design Pattern is one of most popular and useful construction patterns in software engineering. In this post I will try to explain it and show how you can use it with Kotlin. Sadly I often see implementations that are simple translation from Java rather that utilizing cool Kotlin syntactic sugar." />
<meta property="og:description" content=" The Builder Design Pattern is one of most popular and useful construction patterns in software engineering. In this post I will try to explain it and show how you can use it with Kotlin. Sadly I often see implementations that are simple translation from Java rather that utilizing cool Kotlin syntactic sugar." />
<meta name="twitter:description" content=" The Builder Design Pattern is one of most popular and useful construction patterns in software engineering. In this post I will try to explain it and show how you can use it with Kotlin. Sadly I often see implementations that are simple translation from Java rather that utilizing cool Kotlin syntactic sugar." />


<base href="http://localhost:1313/kotlin-builder-pattern/" />
<link rel="canonical" href="http://localhost:1313/kotlin-builder-pattern/" itemprop="url" />
<meta name="url" content="http://localhost:1313/kotlin-builder-pattern/" />
<meta name="twitter:url" content="http://localhost:1313/kotlin-builder-pattern/" />
<meta property="og:url" content="http://localhost:1313/kotlin-builder-pattern/" />


<meta property="og:updated_time" content=29001-29-12T10:00:21Z />


<link rel="sitemap" type="application/xml" title="Sitemap" href='http://localhost:1313/sitemap.xml' />

<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="My New Hugo Site" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />





<meta property="og:type" content="article" />
<meta property="article:publisher" content="" />
<meta property="og:article:published_time" content=29001-29-12T10:00:21Z />
<meta property="article:published_time" content=29001-29-12T10:00:21Z />








<meta name="generator" content="Hugo 0.123.7">


    
    

<link type="text/css" rel="stylesheet" href="/css/bundle.min.53d1001e1add06cd247b1c5240176dbed441d0b274b09f10758b706e8c305b9c.css">


    
    <style>
    body {
        --sidebar-bg-color: #202020;
        --sidebar-img-border-color: #515151;
        --sidebar-p-color: #909090;
        --sidebar-h1-color: #FFF;
        --sidebar-a-color: #FFF;
        --sidebar-socials-color: #FFF;
        --text-color: #222;
        --bkg-color: #FAF9F6;
        --post-title-color: #303030;
        --list-color: #5A5A5A;
        --link-color: #268BD2;
        --date-color: #515151;
        --table-border-color: #E5E5E5;
        --table-stripe-color: #F9F9F9;
        --code-color: #000;
        --code-background-color: #E5E5E5;
        --code-block-color: #FFF;
        --code-block-background-color: #272822;
        --moon-sun-color: #FFF;
        --moon-sun-background-color: #515151;
    }
    body.dark-theme {
        --text-color: #EEE;
        --bkg-color: #121212;
        --post-title-color: #DBE2E9;
        --list-color: #bebebe;
        --link-color: #268BD2;
        --date-color: #9A9A9A;
        --table-border-color: #515151;
        --table-stripe-color: #202020;
        --code-color: #FFF;
        --code-background-color: #515151;
        --code-block-color: #FFF;
        --code-block-background-color: #272822;
    }
    body {
        background-color: var(--bkg-color);
    }
</style>

</head>

    <body class="dark-theme">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
            <a href="http://localhost:1313/">
                <img src="/assets/profile_picture.png" alt="brand image">
            </a>
        
        
            <a href="http://localhost:1313/">
                <h1>Adam Świderski</h1>
            </a>
        
    </h1>
    <p class="lead">
    software engineer
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">

        
        
        
        
            

            
                
                
            
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
        
        
            

            
                
                
                    <li class="heading">
                        <a href="/posts/">Posts</a>
                    </li>
                    
                        <li class="sub-heading">
                            Recent
                        </li>
                        
                            <li class="bullet">
                                <a href="http://localhost:1313/2024-02-24-MVI/">Android Presentation Patterns: MVI</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="http://localhost:1313/2024-02-09-MVVM/">Android Presentation Patterns: MVVM</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="http://localhost:1313/2024-01-29-MVP/">Android Presentation Patterns: MVP</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="http://localhost:1313/2024-01-27-MVC/">Android Presentation Patterns: MVC</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="http://localhost:1313/2023-06-16-ci-is-your-friend/">Continuous Integration and Deployment: A Developer&#39;s Best Friends</a>
                            </li>
                        
                    
                
            
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
        

    </ul>
</nav>

        
    <a target="_blank" class="social" title="GitHub" href="https://github.com">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="-2 -2 24 24">
            <path fill="currentColor" d="M18.88 1.099C18.147.366 17.265 0 16.233 0H3.746C2.714 0 1.832.366 1.099 1.099C.366 1.832 0 2.714 0 3.746v12.487c0 1.032.366 1.914 1.099 2.647c.733.733 1.615 1.099 2.647 1.099H6.66c.19 0 .333-.007.429-.02a.504.504 0 0 0 .286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555 0 0 1-.904-.091a2.026 2.026 0 0 1-.872-.39a1.651 1.651 0 0 1-.572-.8l-.13-.3a3.25 3.25 0 0 0-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956 0 0 1-.17-.156a.723.723 0 0 1-.117-.182c-.026-.061-.004-.111.065-.15c.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1 0 0 1 .631.677c.2.355.44.626.722.813c.282.186.566.28.852.28c.286 0 .533-.022.742-.065a2.59 2.59 0 0 0 .585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907 0 0 1-1.333-.234a5.314 5.314 0 0 1-1.223-.507a3.5 3.5 0 0 1-1.047-.872c-.277-.347-.505-.802-.683-1.365c-.177-.564-.266-1.215-.266-1.952c0-1.049.342-1.942 1.027-2.68c-.32-.788-.29-1.673.091-2.652c.252-.079.625-.02 1.119.175c.494.195.856.362 1.086.5c.23.14.414.257.553.352a9.233 9.233 0 0 1 2.497-.338c.859 0 1.691.113 2.498.338l.494-.312a6.997 6.997 0 0 1 1.197-.572c.46-.174.81-.221 1.054-.143c.39.98.424 1.864.103 2.653c.685.737 1.028 1.63 1.028 2.68c0 .737-.089 1.39-.267 1.957c-.177.568-.407 1.023-.689 1.366a3.65 3.65 0 0 1-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9 0 0 1-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36 0 0 0 .208.189c.096.034.18.056.254.064c.074.01.18.013.318.013h2.914c1.032 0 1.914-.366 2.647-1.099c.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/>
        </svg>
    </a>



    <a target="_blank" class="social" title="LinkedIn" href="https://linkedin.com">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 448 512">
            <path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5c0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7c-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5c67.2 0 79.7 44.3 79.7 101.9V416z"/>
        </svg>
    </a>






    <a target="_blank" class="social" title="YouTube" href="https://youtube.com">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 24 24">
            <path fill="currentColor" d="M12.006 19.012h-.02c-.062 0-6.265-.012-7.83-.437a2.5 2.5 0 0 1-1.764-1.765A26.494 26.494 0 0 1 1.986 12a26.646 26.646 0 0 1 .417-4.817A2.564 2.564 0 0 1 4.169 5.4c1.522-.4 7.554-.4 7.81-.4H12c.063 0 6.282.012 7.831.437c.859.233 1.53.904 1.762 1.763c.29 1.594.427 3.211.407 4.831a26.568 26.568 0 0 1-.418 4.811a2.51 2.51 0 0 1-1.767 1.763c-1.52.403-7.553.407-7.809.407Zm-2-10.007l-.005 6l5.212-3l-5.207-3Z"/>
        </svg>
    </a>








    <a target="_blank" class="social" title="RSS Feed" href="/posts/index.xml">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 1280.000000 1280.000000">
            <g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentColor">
                <path d="M2295 11929 c-284 -12 -642 -45 -707 -65 -17 -5 -18 -63 -18 -1039 0 -569 4 -1036 8 -1039 5 -3 74 6 153 19 510 86 1168 95 1789 25 1348 -153 2602 -677 3670 -1531 385 -308 820 -744 1126 -1129 842 -1060 1362 -2313 1514 -3650 70 -621 61 -1279 -25 -1789 -13 -79 -22 -148 -19 -153 3 -4 471 -8 1039 -8 l1035 0 5 23 c51 225 85 942 67 1419 -23 605 -77 1044 -198 1617 -294 1400 -927 2734 -1823 3846 -1043 1295 -2364 2259 -3909 2854 -1158 447 -2451 656 -3707 600z"/>
                <path d="M2255 7845 c-269 -25 -620 -81 -667 -106 -17 -9 -18 -55 -18 -899 0 -706 3 -890 13 -890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207 -107 2267 -823 2814 -1902 166 -327 268 -637 330 -1001 38 -227 48 -384 42 -662 -8 -348 -44 -590 -126 -831 -23 -66 -41 -126 -41 -132 0 -10 184 -13 890 -13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782 -59 703 -233 1323 -545 1945 -481 956 -1313 1788 -2270 2268 -620 310 -1239 483 -1940 542 -165 14 -669 10 -840 -5z"/>
                <path d="M2519 3815 c-391 -66 -725 -336 -868 -703 -79 -201 -96 -462 -45 -677 83 -344 338 -641 666 -774 116 -47 205 -69 330 -80 412 -39 811 153 1040 500 193 292 240 648 128 981 -135 403 -492 699 -914 757 -100 14 -241 12 -337 -4z"/>
            </g>
        </svg>
    </a>


    <a target="_blank" class="social" title="Email" href="mailto://user@domain">
       <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 485.211 485.211">
            <path fill="currentColor" d="M301.393,241.631L464.866,424.56H20.332l163.474-182.928l58.801,51.443L301.393,241.631z M462.174,60.651H23.027 l219.579,192.142L462.174,60.651z M324.225,221.67l160.986,180.151V80.792L324.225,221.67z M0,80.792v321.029L160.972,221.64 L0,80.792z"/>
       </svg>
    </a>


        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 My New Hugo Site. All rights reserved.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <div class="info">
  <h1 class="post-title">
    <a href="http://localhost:1313/kotlin-builder-pattern/">Kotlin Builder Pattern</a>
  </h1>

  <div class="headline">
    <div>
      
      <time datetime=" 2021-01-29T00:00:00Z" class="post-date">
        January 29, 2021
      </time>
      
      <span> - </span>
      <span class="reading-time">
        
          
        

        <span>11 mins read</span>
      </span>
    </div>

    
    <ul class="tags">
      
      <li class="tag-design patterns">
        <a href="http://localhost:1313/tags/design-patterns">design patterns</a>
      </li>
      
      <li class="tag-Kotlin">
        <a href="http://localhost:1313/tags/kotlin">Kotlin</a>
      </li>
      
      <li class="tag-Builder Pattern">
        <a href="http://localhost:1313/tags/builder-pattern">Builder Pattern</a>
      </li>
      
      <li class="tag-construction design pattern">
        <a href="http://localhost:1313/tags/construction-design-pattern">construction design pattern</a>
      </li>
      
    </ul>
    
  </div>

  
  

  
</div>

  <h2 id="purpose">Purpose</h2>
<p>Builder pattern is used to simplify creating complex objects with non-trivial building logic, or with many constructor parameters. It allows making immutable objects because all properties can be set by the Builder with no need to use object setters.</p>
<p>Builder sort of removes from the user the need to understand the internal object create implementation and guarantees correct object setup or returning an error.</p>
<p>The advantage of using Builder over traditional constructor is being able to pass many <code>vararg</code> arguments, because every Builder method can take one, while the whole constructor can take only one.</p>
<p>Builder solves problem of telescopic constructors, when many variants of constructor are created with increasing number of arguments.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">constructor</span>(firstName: String): <span style="color:#66d9ef">this</span>(firstName, <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">constructor</span>(firstName: String, lastName: String): <span style="color:#66d9ef">this</span>(firstName, lastName, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">constructor</span>(firstName: String, lastName: String, age: Int): <span style="color:#66d9ef">this</span>(firstName, lastName, age)
</span></span></code></pre></div><p>Technically they allow you to use the constructor with just enough arguments you want to set, but in practice adding a new field to the class forces you to modify each constructor. Fortunately in Kotlin you can use named arguments and you don&rsquo;t have to mimic Java.</p>
<p>From my personal experience, you will more often use Builder than create your own, but I believe it&rsquo;s worth understanding how it works and be comfortable using it when the need comes.</p>
<h3 id="example-usage">Example usage</h3>
<p>Because of my professional bias, examples are coming from Android world.</p>
<h4 id="notificationbuilder">NotificationBuilder</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> notificationBuilder = <span style="color:#a6e22e">Notification</span>.Builder(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;channelId&#34;</span>)
</span></span><span style="display:flex;"><span>notificationBuilder.setContentTitle(<span style="color:#e6db74">&#34;Title&#34;</span>)
</span></span><span style="display:flex;"><span>notificationBuilder.setContentText(<span style="color:#e6db74">&#34;Content&#34;</span>)
</span></span><span style="display:flex;"><span>notificationBuilder.setSmallIcon(<span style="color:#a6e22e">R</span>.mipmap.ic_launcher)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> notification = notificationBuilder.build()
</span></span></code></pre></div><p>Most traditional usage of the Builder Pattern. Builders Constructor takes 2 arguments necessary for proper object creation, other fields are getting values through setter methods called on the Builder instance. Finally the <code>build()</code> method is called that returns desired notification object.</p>
<h4 id="dexter">Dexter</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#a6e22e">DialogOnAnyDeniedMultiplePermissionsListener</span>.Builder
</span></span><span style="display:flex;"><span>        .withContext(context)
</span></span><span style="display:flex;"><span>        .withTitle(<span style="color:#e6db74">&#34;Camera permission&#34;</span>)
</span></span><span style="display:flex;"><span>        .withMessage(<span style="color:#e6db74">&#34;Camera permission is needed to take pictures of your cat&#34;</span>)
</span></span><span style="display:flex;"><span>        .withButtonText(android.<span style="color:#a6e22e">R</span>.string.ok)
</span></span><span style="display:flex;"><span>        .withIcon(<span style="color:#a6e22e">R</span>.mipmap.my_icon)
</span></span><span style="display:flex;"><span>        .build()
</span></span></code></pre></div><p>In this example Builder methods are connected in a chain. It&rsquo;s possible because each one of them returns Builder instance, so <code>this</code>. With proper method naming you can almost read it like a sentence. Of course modern IDEs can display parameters name in methods to help with the correct order, but during code review when all we have is text, well named methods building instance can be a huge help.</p>
<h4 id="alertdialog">AlertDialog</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> dialog = <span style="color:#a6e22e">AlertDialog</span>.Builder(<span style="color:#66d9ef">this</span>)
</span></span><span style="display:flex;"><span>        .apply {
</span></span><span style="display:flex;"><span>            setTitle(<span style="color:#e6db74">&#34;Title&#34;</span>)
</span></span><span style="display:flex;"><span>            setIcon(<span style="color:#a6e22e">R</span>.mipmap.ic_launcher)
</span></span><span style="display:flex;"><span>        }.show()
</span></span></code></pre></div><p>Very Kotlin style with utilizing the <code>apply</code>. Interestingly enough there is no <code>build()</code> method but <code>show()</code> that is not only returning dialog object but also displays it. Sounds like a bad idea for a method to do more than one thing, but in this case I believe it was done on purpose to avoid a common mistake of creating a dialog but forgetting to display it with a separate method.</p>
<h2 id="elements">Elements</h2>
<p>Builder is basically a single internal helper class. I won&rsquo;t be covering approach with <code>Director</code> and <code>ConcreteBuilder</code> proposed by the Gang of Four, I&rsquo;ve never seen it in production code yet :)</p>
<h3 id="constructor">Constructor</h3>
<p>Surprisingly, Builders constructor is very important, even when it doesn&rsquo;t usually take any arguments. Constructor should require all arguments that are needed to build correct object. You can&rsquo;t expect Builder user will know which setters to use, or will read documentation :)</p>
<blockquote>
<p>It seems obvious, but some time ago on Android platform you could legaly build a notification that had no chance to be displayed by the system. All you had to do was to not set the title or content text or an icon - none of those things were required by the Builder constructor. There was also no exception thrown when trying to display such notification&hellip;</p>
</blockquote>
<h3 id="methods">Methods</h3>
<p>Besides constructor Builder gives you methods to set the object.</p>
<p>In case of not setting some property with a dedicated method, default value should be used. It can also be <code>null</code>. Thanks to great nullability handling in Kotlin it is much better to use default <code>null</code> value than for example: &quot;&quot; (empty <code>String</code>) or magic value like <code>-1</code> when only positive number is expected. To detect if value was set or not simple null-check <code>.?</code> can be used instead of comparing to some default value used for certain type in project or class.</p>
<p>Methods should be allowed to be called in any given order.</p>
<p>Mandatory <code>build()</code> method, or other reasonably named (like <code>show()</code> for dialog) returning the desired object.</p>
<p>When using Builder Pattern, it&rsquo;s good to make objects constructor private to limit creating the object just for internal Builder.</p>
<h3 id="verifying-the-arguments">Verifying the arguments</h3>
<p>When using Builder you pass wrong values, not allowed in the object, when should you be notified about it?
There are at least few approaches:</p>
<ol>
<li>ASAP, when Builder method gets wrong argument it should check if its OK for the object, but:
<ul>
<li>what if correct argument value depends on argument set by other method? If order of calling methods matters then what is the point of even using Builder over traditional constructor?</li>
<li>checking values at Builder methods may not be enough, <code>build()</code> method should also verify arguments all together</li>
</ul>
</li>
<li>Only the <code>build()</code> method should check all arguments at once, because there may be some dependencies between them, and this was the first thing why the Builder Pattern was used, so:
<ul>
<li>well constructed Builder allows chaining methods so validation in <code>build()</code> method isn&rsquo;t much later that checking in each setter method</li>
<li>dependencies between arguments can be verified</li>
<li>but if Builder is not the only way of creating the object then validations have to be copy-pasted to every place that is creating the object</li>
</ul>
</li>
<li>The object itself should verify its correctness
<ul>
<li>minding SRP (Single-Responsibility Principle), Builder just constructs the objects with all required data, but object can verify if the data is correct</li>
<li>no need to copy-paste validations, every place creating the object will have to pass the same checks</li>
</ul>
</li>
</ol>
<p><a href="https://softwareengineering.stackexchange.com/questions/241309/builder-pattern-when-to-fail" target="_blank">Interesting thread at StackExchange about it</a>,
where some users suggest merging approach 2 and 3. The point is for Builder to verify its contracts, and for the object to verify its own contracts. Nice example of Builder that creates a String containing number ranges like &ldquo;1-2,3-4,5-6&rdquo;. <code>String</code> class can&rsquo;t verify if range edges have correct values - it was made to just handle string of characters. But Builder on the other hand, can and should check if added range makes sense, or if ranges are not overlapping if that is the requirement. Then the method <code>addRange(min Int,max Int)</code> should throw <code>IllegalArgumentException</code> when <code>min &gt; max</code> and <code>build()</code> method should throw exception when ranges like <code>1-4</code> and <code>2-6</code> are added. Or maybe the <code>addRange()</code> method should throw, that&rsquo;s debatable.</p>
<p>In any case, I would stick to the rule that created object verifies its contracts, and Builder checks its own contracts.</p>
<p><a href="https://pl.wikipedia.org/wiki/Joshua_Bloch" target="_blank">Joshua Bloch</a> in his famous book &ldquo;Effective Java&rdquo;
(chapter 2, topic 2) also suggests verifying value correctness after coping values from Builder, not in Builder itself.</p>
<h2 id="implementation">Implementation</h2>
<p>I guess this is the part you were waiting for :)</p>
<h3 id="java-style">Java style</h3>
<p>Barebone example of the simplest possible Builder. Basically, Java translated to Kotlin without using any language fireworks.
We have here:</p>
<ul>
<li>private constructor in <code>Product</code> to limit creating instances only to inner Builder class</li>
<li>required <code>requiredProperty</code> argument in Builders constructor</li>
<li>optional field set by <code>optionalProperty()</code>, default value is <code>null</code> and that is OK for <code>Product</code></li>
<li>method <code>optionalProperty()</code> is returning <code>this</code> to allow method chaining</li>
<li><code>build()</code> method creating instance of <code>Product</code> with all fields set with values from Builder</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Product</span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">constructor</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> property: Any,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> optionalProperty: Any?
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Builder</span>(<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> requiredProperty: Any) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">var</span> optionalProperty: Any? = <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">optionalProperty</span>(<span style="color:#66d9ef">value</span>: Any?): Builder {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.optionalProperty = <span style="color:#66d9ef">value</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">build</span>(): Product {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> Product(requiredProperty, optionalProperty)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>And usage</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> product = <span style="color:#a6e22e">Product</span>.Builder(<span style="color:#e6db74">&#34;required&#34;</span>)
</span></span><span style="display:flex;"><span>        .optionalProperty(<span style="color:#e6db74">&#34;optional&#34;</span>)
</span></span><span style="display:flex;"><span>        .build()
</span></span></code></pre></div><h3 id="more-like-kotlin">More like Kotlin</h3>
<p>Builders constructor specifies all fields, and their possible default values. It could be a <code>data class</code> but in this case it wouldn&rsquo;t provide any additional value. Lack of default value in the constructor is making argument mandatory.</p>
<p>Using <code>apply</code> makes <code>optionalProperty()</code> to return instance of the Builder. I also used so called <a href="https://kotlinlang.org/docs/reference/functions.html#single-expression-functions" target="_blank">single-expression function</a> meaning no explicit return type declaration.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FancyProduct</span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">constructor</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> property: Any,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> optionalProperty: Any?
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Builder</span>(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">var</span> requiredProperty: String,
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">var</span> optionalProperty: Any? = <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    ) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">optionalProperty</span>(<span style="color:#66d9ef">value</span>: Any) = apply { <span style="color:#66d9ef">this</span>.optionalProperty = <span style="color:#66d9ef">value</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">build</span>(): FancyProduct {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> FancyProduct(requiredProperty, optionalProperty)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Such Builder can be used in few ways:</p>
<ul>
<li>identical as in Java or Kotlin example above</li>
<li>providing both arguments (required and optional) at once in Builder constructor</li>
<li>providing both arguments but in random order using named arguments</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> fancyProduct = <span style="color:#a6e22e">FancyProduct</span>.Builder(<span style="color:#e6db74">&#34;required&#34;</span>)
</span></span><span style="display:flex;"><span>        .optionalProperty(<span style="color:#e6db74">&#34;optional&#34;</span>)
</span></span><span style="display:flex;"><span>        .build()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> fancyProduct2 = <span style="color:#a6e22e">FancyProduct</span>.Builder(
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;required&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;optional&#34;</span>
</span></span><span style="display:flex;"><span>).build()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> fancyProduct3 = <span style="color:#a6e22e">FancyProduct</span>.Builder(
</span></span><span style="display:flex;"><span>        optionalProperty = <span style="color:#e6db74">&#34;optional&#34;</span>,
</span></span><span style="display:flex;"><span>        requiredProperty = <span style="color:#e6db74">&#34;required&#34;</span>
</span></span><span style="display:flex;"><span>).build()
</span></span></code></pre></div><h3 id="kotlin-dsl">Kotlin DSL</h3>
<p><a href="https://en.wikipedia.org/wiki/Domain-specific_language" target="_blank">DSL (Domain Specific Language)</a> is a domain-dedicated quasi language. Kotlin allows fairly easy and pleasant method creation, that can be later used to describe objects in a purely domain way.</p>
<p>Builder looks the same as in previous example.</p>
<p>Inside <code>DslProduct</code> class there is now a <code>companion object</code> with <code>dslProduct()</code> method that will allow us to create a desired object. This hides the Builder behind a method.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DslProduct</span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">constructor</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> requiredProperty: Any,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> optionalProperty: Any?
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">companion</span> <span style="color:#66d9ef">object</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">dslProduct</span>(requiredProperty: Any, block: <span style="color:#a6e22e">Builder</span>.() <span style="color:#f92672">-&gt;</span> Unit) =
</span></span><span style="display:flex;"><span>                Builder(requiredProperty)
</span></span><span style="display:flex;"><span>                        .apply(block)
</span></span><span style="display:flex;"><span>                        .build()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Builder</span>(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> requiredProperty: Any,
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">var</span> optionalProperty: Any? = <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>    ) {
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">optionalProperty</span>(<span style="color:#66d9ef">value</span>: Any?) = apply { <span style="color:#66d9ef">this</span>.optionalProperty = <span style="color:#66d9ef">value</span> }
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">build</span>() = DslProduct(requiredProperty, optionalProperty)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Using this simple DSL looks like this.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> dslProduct = dslProduct(<span style="color:#e6db74">&#34;required&#34;</span>) {
</span></span><span style="display:flex;"><span>    optionalProperty(<span style="color:#e6db74">&#34;optional&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>For such a simple object using DSL doesn&rsquo;t look very tempting, but if object is a composition of other complex objects - each with its own builder than it start to look interesting. Example from one of my apps I created with <a href="https://kotlinlang.org/docs/reference/type-safe-builders.html" target="_blank">DslMaker</a>. It&rsquo;s part of Kotlin standard library (so no extra dependencies) and additionaly it takes care for inner builder scope limits. Address, Location and OpenHours are using Builders and DSL to create instances.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> shop = shop(<span style="color:#e6db74">&#34;ID&#34;</span>) {
</span></span><span style="display:flex;"><span>    address = address {
</span></span><span style="display:flex;"><span>        cityName = <span style="color:#e6db74">&#34;Poznań&#34;</span>
</span></span><span style="display:flex;"><span>        streetName = <span style="color:#e6db74">&#34;ul. Półwiejska&#34;</span>
</span></span><span style="display:flex;"><span>        streetNumber = <span style="color:#e6db74">&#34;123/2&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    location = location {
</span></span><span style="display:flex;"><span>        lat = <span style="color:#ae81ff">53.12</span>
</span></span><span style="display:flex;"><span>        lng = <span style="color:#ae81ff">23.4</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    openHours = openHours {
</span></span><span style="display:flex;"><span>        weekDay = <span style="color:#e6db74">&#34;6:00-22:00&#34;</span>
</span></span><span style="display:flex;"><span>        saturday = <span style="color:#e6db74">&#34;7:00-23:00&#34;</span>
</span></span><span style="display:flex;"><span>        sunday = <span style="color:#e6db74">&#34;closed&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    features(
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Feature</span>.Bakery,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Feature</span>.Atm
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Full example with DslMaker -&gt; <a href="https://gist.github.com/asvid/5fed8dd3c831c2a72744e8ffe8f7dc0f" target="_blank">tutaj</a> &lt;- But still this is a fairly simple example and DSL itself in Kotlin deserves a separate post.</p>
<p>However, the DSL approach requires you to write some boilerplate, that doesn&rsquo;t look very inviting at first&hellip;</p>
<h2 id="alternative">Alternative</h2>
<p>Named arguments in constructor and default field values inside created object may in a way give you similar effect as Builder Pattern. This can be useful for rather simple objects. It&rsquo;s also worth making sure that the default values create a sensible instance from domain point of view, not just so it compiles.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> person = Person(
</span></span><span style="display:flex;"><span>        firstName = <span style="color:#e6db74">&#34;Adam&#34;</span>,
</span></span><span style="display:flex;"><span>        lastName = <span style="color:#e6db74">&#34;Świderski&#34;</span>,
</span></span><span style="display:flex;"><span>        address = Address(
</span></span><span style="display:flex;"><span>                cityName = <span style="color:#e6db74">&#34;Poznań&#34;</span>,
</span></span><span style="display:flex;"><span>                streetName = <span style="color:#e6db74">&#34;ul. Półwiejska&#34;</span>,
</span></span><span style="display:flex;"><span>                streetNumber = <span style="color:#e6db74">&#34;123/1&#34;</span>,
</span></span><span style="display:flex;"><span>                country = <span style="color:#e6db74">&#34;Poland&#34;</span>,
</span></span><span style="display:flex;"><span>                postalCode = <span style="color:#e6db74">&#34;60-000&#34;</span>
</span></span><span style="display:flex;"><span>        ),
</span></span><span style="display:flex;"><span>        contact = Contact(
</span></span><span style="display:flex;"><span>                workEmail = <span style="color:#e6db74">&#34;adam@work.email&#34;</span>,
</span></span><span style="display:flex;"><span>                workPhoneNumber = <span style="color:#e6db74">&#34;+48 123112312&#34;</span>,
</span></span><span style="display:flex;"><span>                privateEmail = <span style="color:#e6db74">&#34;adam@private.email&#34;</span>
</span></span><span style="display:flex;"><span>        ),
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>It even look kinda like DSL, but without need to use annotations and writing additional methods etc. You can notice fields like <code>val height: Float? = null</code> - I decided that this information is not required to create sensible <code>Person</code> instance so default value is set to <code>null</code>. Yup <code>null</code> and not <code>0.0</code> or <code>-1.0</code>, or some other magic <code>DEFAULT_HEIGHT</code> constant.</p>
<p>Inside <code>init</code> blocks fields values are verified (check <code>Verifying the arguments</code> above). Passing wrong argument type is cought at compile time, but object can have some domain requirements like: height have to be a positive number, or shoe size (if provided) can&rsquo;t be smaller than 4.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">data</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> firstName: String,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> lastName: String,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> address: Address,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> contact: Contact,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> height: Float? = <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> shoeSize: Float? = <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">init</span> {
</span></span><span style="display:flex;"><span>        height<span style="color:#f92672">?.</span>let { require(<span style="color:#ae81ff">0f</span> &lt; <span style="color:#66d9ef">it</span>) { <span style="color:#e6db74">&#34;height is always greater than 0&#34;</span> } }
</span></span><span style="display:flex;"><span>        shoeSize<span style="color:#f92672">?.</span>let { require(<span style="color:#ae81ff">4f</span> <span style="color:#f92672">&lt;=</span> <span style="color:#66d9ef">it</span>) { <span style="color:#e6db74">&#34;smallest standard shoe size is 4&#34;</span> } }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">data</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Address</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> country: String,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> cityName: String,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> streetName: String,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> streetNumber: String,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> postalCode: String,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> district: String? = <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">data</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Contact</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> workPhoneNumber: String,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> workEmail: String,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> privatePhoneNumber: String? = <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> privateEmail: String? = <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">init</span> {
</span></span><span style="display:flex;"><span>        require(workPhoneNumber.isValidPhoneNumber())
</span></span><span style="display:flex;"><span>        require(workEmail.isValidEmail())
</span></span><span style="display:flex;"><span>        require(privatePhoneNumber<span style="color:#f92672">?.</span>isValidPhoneNumber() <span style="color:#f92672">?:</span> <span style="color:#66d9ef">true</span>)
</span></span><span style="display:flex;"><span>        require(privateEmail<span style="color:#f92672">?.</span>isValidEmail() <span style="color:#f92672">?:</span> <span style="color:#66d9ef">true</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="summary">Summary</h2>
<p>Builder is quite useful construction Design Pattern and for sure you will come across it at some point. It can make creating complex objects easy. Well named Builder methods will make building object look like a sentence. Kotlin features allow reducing Builder boilerplate and using conveniences like DSL, named parameters and default values may allow you to get similar result without writing any additional code.</p>
<p>In Design Patterns literature you can find more complex examples of Builder using elements like <code>Director</code> and <code>ConcreteBuilder</code>. I never encountered things like that in my career, but I believe there are usecases for it. If at same point, you need to have generic way of providing instances of objects using many types of Builders - maybe there are nicer ways of achieving this :)</p>

  
  <hr>
<div class="footer">
    
	    
            <a class="previous-post" href="http://localhost:1313/code-review-retro/?ref=footer"><span style="font-weight:bold;">« Previous</span><br>Code Review Retro</a>
        
	    
            <div class="next-post">
                <a href="http://localhost:1313/kotlin-static-factory-methods/?ref=footer"><span style="font-weight:bold;">Next »</span><br>Kotlin Static Factory Methods</a>
            </div>
        
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#purpose">Purpose</a>
      <ul>
        <li><a href="#example-usage">Example usage</a></li>
      </ul>
    </li>
    <li><a href="#elements">Elements</a>
      <ul>
        <li><a href="#constructor">Constructor</a></li>
        <li><a href="#methods">Methods</a></li>
        <li><a href="#verifying-the-arguments">Verifying the arguments</a></li>
      </ul>
    </li>
    <li><a href="#implementation">Implementation</a>
      <ul>
        <li><a href="#java-style">Java style</a></li>
        <li><a href="#more-like-kotlin">More like Kotlin</a></li>
        <li><a href="#kotlin-dsl">Kotlin DSL</a></li>
      </ul>
    </li>
    <li><a href="#alternative">Alternative</a></li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
    </div>
</div>

  

        </div>
    </body>
</html>


